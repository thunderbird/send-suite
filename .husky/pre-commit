. "$(dirname "$0")/_/husky.sh"

echo "🐺 Running pre commit hooks..."

# Formatting package.json files
pnpm sort-package-json

# Check that env vars match
echo "🔍 Checking that env vars match..."
pnpm compare_envs

# Running tests
echo "🧪 Running tests..."
pnpm test

# Run lint-staged on frontend
echo "🧶 Running lint-staged on frontend..."
cd frontend && pnpx lint-staged

# Back to root
cd ..

# Run lint-staged on backend
echo "🧶 Running lint-staged on backend..."
cd backend && pnpx lint-staged && pnpm typecheck

# Run typecheck
echo "🔍 Running typecheck..."
pnpm run build